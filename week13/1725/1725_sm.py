# 히스토그램
# 플래..?

# 각 칸의 간격은 일정하고, 높이는 어떤 정수로 주어진다.
# 위 그림의 경우 높이가 각각 2 1 4 5 1 3 3이다.
#
# 이러한 히스토그램의 내부에 가장 넓이가 큰 직사각형을 그리려고 한다.
# 이 직사각형의 밑변은 항상 히스토그램의 아랫변에 평행하게 그려져야 한다.
# 주어진 히스토그램에 대해, 가장 큰 직사각형의 넓이를 구하는 프로그램을 작성하시오.

import sys

N = int(input())

lst = []

for _ in range(N):
    lst.append(int(input()))

# 하.. 모르겠어요...